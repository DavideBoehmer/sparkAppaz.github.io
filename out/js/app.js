!function(){function a(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.send(),c.addEventListener("readystatechange",function(){4===c.readyState&&200===c.status&&b(c.responseText)})}function b(a){this.elem=a,this.view=this.elem.href,this.addClickListener()}var c=document.querySelector("#view"),d=function(){var a=[];return{init:function(c){var d;if(c.gatherLinks)for(this.links=document.querySelectorAll(c.linkSelector),d=0;d<this.links.length;d++)a.push(new b(this.links[d]))},getLinks:function(){return a}}}();b.prototype={addClickListener:function(){this.elem.addEventListener("click",function(a){a.preventDefault(),history.pushState(null,null,this.view),"/"!==location.pathname&&this.ajaxViewCall(this.view,c)}.bind(this))},ajaxViewCall:function(b,c){a(this.view,function(a){console.log(a),c.innerHTML=a})}};var e=function(){function b(b){window.addEventListener("popstate",function(){console.log(location.pathname),"/"===location.pathname?e(b.initView,function(){d.init(b)}):a(location.pathname,function(a){c.innerHTML=a,d.init(b)})})}function e(b,d){a(b,function(){a(b,function(a){c.innerHTML=a,d()})})}return{init:function(a){this.options=a,this.viewContainer=document.querySelector(a.viewContainer),console.log(this.viewContainer),e(a.initView,function(){d.init(a)}),this.bindListeners()},bindListeners:function(){b(this.options)}}}();!function(){var a={linkSelector:"a.view-link",gatherLinks:!0,initView:"/out/views/main.html",viewContainer:"#view"};e.init(a)}()}();